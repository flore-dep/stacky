<div class="container mt-3">
  <h2 class="text-center mt-4"> My softwares </h2>


<div data-controller="dashboard">
  <div class="d-flex d-wrap align-content-center">
    <div class="green-button-visible" data-dashboard-target="dashboardButton">
      <h5 class="px-3 py-1 m-0" data-action="click->dashboard#viewDashboard"> Dashboard </h5>
    </div>

    <div class="gray-button-disable text-center ms-5" data-dashboard-target="myAppsButton">
        <h5 class="px-3 py-1 m-0" data-action="click->dashboard#viewApps"> Apps hosted </h5>
    </div>
  </div>


  <div data-dashboard-target="dashboard">
      <div class="row g-5 mt-3">
      </div>
    </div>

  <div class="d-none" data-dashboard-target="myApps">
        <div class="row g-5 mt-3">
          <% @my_softwares.each do |software| %>
            <%= render 'my_software_card', software: software %>
          <% end %>
          </div>
        </div>
      </div>
  </div>














  <div class="my-3">
    <div class="border-bottom m-4 pb-3">
      <div class="d-flex justify-content-between align-items-center">
        <h5 class="m-0">My softwares</h5>
        <%= link_to new_software_path, class: "btn btn-dark" do %>
          <i class="fa-solid fa-plus text-white me-2"></i>Add a new software
        <% end %>
      </div>
    </div>

    <div class="row g-5">
      <% @my_softwares.each do |software| %>
        <div class="col-4 p-0">
          <%= link_to software_path(software), class: "text-decoration-none text-dark" do %>
            <div class="app-card mb-3" style="max-width: 540px; height: 260px;">
              <div class="row g-0">
                <div class="col-md-4">
                  <% if software.logo.attached? %>
                    <%= cl_image_tag software.logo.key, class: "img-fluid rounded-start p-3" %>
                  <% else %>
                    <%= image_tag "logos/default-logo.jpg", class: "img-fluid rounded-start p-3" %>
                  <% end %>
                </div>
                <div class="col-md-8">
                  <div class="card-body m-3">
                    <h5 class="card-title"><%= software.name %></h5>
                    <p class="card-text">
                      <%= truncate(software.description, length: 60, omission: '...') %>
                    </p>
                    <% if software.average_rating.present? %>
                      <p class="card-text">
                        <%= software.average_rating %>
                        <i class="fa-solid fa-star text-warning"></i>
                      </p>
                    <% else %>
                      <p class="card-text">No ratings</p>
                    <% end %>
                    <p class="card-text"><strong>Price:</strong> <%= number_to_currency(software.price_month, unit: "â‚¬") %></p>
                    <p class="card-text"><strong>Tag:</strong> <%= software.tag %></p>
                  </div>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
</div>
